import React, { FC,  useState } from 'react';
import { useStore } from 'effector-react'
import { Link } from 'react-router-dom'
import { $authStore } from '../../../effector/auth'
import { toggleLogin, toggleRegistration } from '../../../effector/togglePopup/togglePopup'
import LittleMenu from './components/littleMenu/LittleMenu'
import Balance from './components/balance/Balance'
import './Header.scss'

type HeaderProps = {
    setVisibleAside: (state: boolean) => void
}

const Header:FC<HeaderProps> = ({setVisibleAside}) => {
    const auth = useStore($authStore)
    const [toggleLittle, setToggleLittle] = useState(false)
    const toggleState = () => {
        setToggleLittle(!toggleLittle)
    }
    
    return (
        <header className='header'>
            <div className='header__inner'>
                <nav className='header__nav'>
                    <Link className='header__logo-box' to='/'>
                        <div className='header__logo'>Dunge<span className='green-color'>ON</span></div>
                    </Link>
                    <div className='header__menu'>
                        <span onClick={toggleState}>
                            <span className='header__menu-item'></span>
                            <span className='header__menu-item'></span>
                            <span className='header__menu-item'></span>
                        </span>
                        <LittleMenu setVisibleAside={setVisibleAside} toggleLittle={toggleLittle} setToggleLittle={setToggleLittle} />
                    </div>
                    <Link to='/' className='header__item'>
                        <svg className='header__item-icon header__icon-slot' viewBox="0 0 512 512"><g><g id="XMLID_1203_"><g id="XMLID_304_"><path id="XMLID_305_" d="m462 66h-161c-5.523 0-10 4.477-10 10s4.477 10 10 10h161c16.542 0 30 13.458 30 30v280c0 16.542-13.458 30-30 30h-412c-16.542 0-30-13.458-30-30v-280c0-16.542 13.458-30 30-30h161c5.523 0 10-4.477 10-10s-4.477-10-10-10h-161c-27.57 0-50 22.43-50 50v280c0 27.57 22.43 50 50 50h412c27.57 0 50-22.43 50-50v-280c0-27.57-22.43-50-50-50z" data-original="#000000" /><path id="XMLID_581_" d="m44 120v272c0 5.523 4.477 10 10 10h404c5.523 0 10-4.477 10-10v-272c0-5.523-4.477-10-10-10h-404c-5.523 0-10 4.477-10 10zm155 262v-252h114v252zm249 0h-115v-252h115zm-384-252h115v252h-115z" data-original="#000000" /><path id="XMLID_1073_" d="m156.874 201.454c-1.847-2.829-4.996-4.534-8.374-4.534h-54c-5.523 0-10 4.477-10 10s4.477 10 10 10h38.681l-36.985 84.135c-2.222 5.056.075 10.956 5.13 13.179 1.31.575 2.675.848 4.019.848 3.846 0 7.513-2.231 9.16-5.978l43.149-98.159c1.36-3.093 1.066-6.662-.78-9.491z" data-original="#000000" /><path id="XMLID_1074_" d="m363.5 216.92h38.681l-36.985 84.135c-2.222 5.056.075 10.956 5.13 13.179 1.31.575 2.675.848 4.019.848 3.846 0 7.513-2.231 9.16-5.978l43.149-98.159c1.359-3.092 1.066-6.662-.78-9.491-1.847-2.829-4.996-4.534-8.374-4.534h-54c-5.523 0-10 4.477-10 10s4.477 10 10 10z" data-original="#000000" /><path id="XMLID_1077_" d="m291.374 201.454c-1.847-2.829-4.996-4.534-8.374-4.534h-54c-5.523 0-10 4.477-10 10s4.477 10 10 10h38.681l-36.985 84.135c-2.222 5.056.075 10.956 5.13 13.179 1.31.575 2.675.848 4.019.848 3.846 0 7.513-2.231 9.16-5.978l43.149-98.159c1.36-3.093 1.066-6.662-.78-9.491z" data-original="#000000" /><path id="XMLID_1078_" d="m256 86c2.63 0 5.21-1.07 7.07-2.93s2.93-4.44 2.93-7.07-1.07-5.21-2.93-7.07-4.44-2.93-7.07-2.93-5.21 1.07-7.07 2.93-2.93 4.44-2.93 7.07 1.07 5.21 2.93 7.07 4.44 2.93 7.07 2.93z" data-original="#000000" /></g></g></g> </svg>
                        <span className='header__item-title header__title-slot'>Главная</span>
                    </Link>
                    <Link to='/about' className='header__item'>
                        <svg className='header__item-icon' xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M26.072 2.274h-1.271v-1.547c0-0.401-0.325-0.727-0.727-0.727s-0.727 0.325-0.727 0.727v0 1.554h-14.667v-1.554c0-0.401-0.325-0.726-0.726-0.726s-0.726 0.325-0.726 0.726v0 1.554h-1.235c-2.006 0.001-3.631 1.627-3.632 3.632v22.455c0.001 2.006 1.627 3.631 3.632 3.632h20.072c2.006-0.001 3.631-1.627 3.632-3.632v-22.462c0-2.003-1.622-3.628-3.625-3.632zM12.604 23.711l-3.189 3.051c-0.127 0.126-0.302 0.203-0.495 0.203-0.002 0-0.004 0-0.007-0h0c-0.201-0.001-0.382-0.081-0.516-0.211l-1.736-1.736c-0.131-0.131-0.212-0.312-0.212-0.512 0-0.4 0.324-0.724 0.724-0.724 0.2 0 0.381 0.081 0.512 0.212l1.235 1.235 2.68-2.557c0.13-0.125 0.307-0.202 0.501-0.202 0.206 0 0.391 0.086 0.523 0.223l0 0c0.125 0.128 0.202 0.304 0.202 0.498 0 0.204-0.086 0.389-0.223 0.519l-0 0zM12.604 16.447l-3.189 3.051c-0.127 0.126-0.302 0.203-0.495 0.203-0.002 0-0.005 0-0.007-0h0c-0.201-0.001-0.382-0.081-0.516-0.21l0 0-1.736-1.736c-0.131-0.131-0.212-0.312-0.212-0.512 0-0.4 0.324-0.724 0.724-0.724 0.2 0 0.381 0.081 0.512 0.212v0l1.235 1.235 2.68-2.557c0.13-0.125 0.307-0.202 0.501-0.202 0.205 0 0.391 0.086 0.523 0.223l0 0c0.125 0.129 0.202 0.304 0.202 0.498 0 0.204-0.086 0.389-0.223 0.519l-0 0zM12.604 9.182l-3.189 3.051c-0.127 0.126-0.302 0.203-0.495 0.203-0.002 0-0.005 0-0.007-0h0c-0.201-0.001-0.382-0.081-0.516-0.21l0 0-1.736-1.737c-0.131-0.131-0.212-0.312-0.212-0.512 0-0.4 0.324-0.724 0.724-0.724 0.2 0 0.381 0.081 0.512 0.212l1.235 1.235 2.68-2.557c0.13-0.125 0.307-0.202 0.501-0.202 0.205 0 0.391 0.086 0.523 0.223l0 0c0.125 0.129 0.202 0.304 0.202 0.498 0 0.204-0.086 0.389-0.223 0.519l-0 0zM24.895 25.44h-8.354c-0.401 0-0.726-0.325-0.726-0.726s0.325-0.726 0.726-0.726v0h8.354c0.401 0 0.727 0.325 0.727 0.727s-0.325 0.727-0.727 0.727v0zM24.895 18.176h-8.354c-0.401 0-0.727-0.325-0.727-0.727s0.325-0.727 0.727-0.727v0h8.354c0.401 0 0.727 0.325 0.727 0.727s-0.325 0.727-0.727 0.727v0zM24.895 10.911h-8.354c-0.401 0-0.727-0.325-0.727-0.727s0.325-0.727 0.727-0.727v0h8.354c0.401 0 0.727 0.325 0.727 0.727s-0.325 0.727-0.727 0.727v0z"></path></svg>
                        <span className='header__item-title'>Как играть</span>
                    </Link>
                    <Link to='/contact' className='header__item'>
                        <svg className='header__item-icon' xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 32"><path d="M26.948 12.168v-1.23c0-2.945-1.042-5.681-2.931-7.711-1.936-2.084-4.598-3.227-7.503-3.227h-1.015c-2.904 0-5.566 1.143-7.503 3.227-1.889 2.030-2.931 4.766-2.931 7.711v1.23c-2.292 0.155-4.114 2.064-4.114 4.397v1.923c0 2.427 1.976 4.403 4.403 4.403h2.481c0.444 0 0.807-0.363 0.807-0.807v-9.123c0-0.444-0.363-0.807-0.807-0.807h-1.156v-1.217c0-5.318 3.792-9.324 8.813-9.324h1.015c5.029 0 8.813 4.007 8.813 9.324v1.217h-1.156c-0.444 0-0.807 0.363-0.807 0.807v9.116c0 0.444 0.363 0.807 0.807 0.807h1.129c-0.329 4.208-3.227 5.183-4.571 5.405-0.37-1.136-1.439-1.956-2.696-1.956h-2.017c-1.56 0-2.83 1.271-2.83 2.83s1.271 2.837 2.83 2.837h2.024c1.304 0 2.4-0.887 2.729-2.084 0.659-0.094 1.701-0.329 2.736-0.934 1.459-0.854 3.187-2.595 3.415-6.104 2.306-0.141 4.134-2.057 4.134-4.397v-1.923c0.007-2.326-1.808-4.242-4.101-4.39zM7.042 21.271h-1.674c-1.54 0-2.79-1.25-2.79-2.79v-1.923c0-1.54 1.25-2.79 2.79-2.79h1.674v7.503zM18.034 30.387h-2.024c-0.672 0-1.217-0.545-1.217-1.217s0.545-1.217 1.217-1.217h2.024c0.672 0 1.217 0.545 1.217 1.217s-0.545 1.217-1.217 1.217zM29.442 18.481c0 1.54-1.25 2.79-2.79 2.79h-1.674v-7.503h1.674c1.54 0 2.79 1.25 2.79 2.79v1.923z"></path></svg>
                        <span className='header__item-title'>Контакты</span>
                    </Link>
                </nav>
                {
                    auth.isAuth ?
                        <div className='cont'>
                            <Balance setVisibleAside={setVisibleAside} />
                        </div>
                        :
                        <div className='header__auth'>
                            <button onClick={() => toggleRegistration(true)} className='header__button header__registration'>
                                РЕГИСТРАЦИЯ
                            </button>
                            <button onClick={() => toggleLogin(true)} className='header__button header__login'>
                                ВОЙТИ
                            </button>
                        </div>
                }
            </div>
        </header>
    )
}

export default Header